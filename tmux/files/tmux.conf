set-option -g prefix C-a  # make the command key C-a
unbind-key C-b            # unbind the old command key
bind-key a send-prefix    # 'C-a a' sends literal 'C-a'

# <prefix> escape : will enter copy mode, allowing you to copy text or view the history of the buffer, including searching with / and ?
# You can leave this mode just by pressing Enter, or
# you can start a selection by pressing 'v' (default Space), move and copy it with 'y' (default Enter)
# If you have text copied like this you can paste it into any tmux window in that session by pressing <prefix> ]
# Reference : http://blog.sanctum.geek.nz/vi-mode-in-tmux/

setw -g mode-keys vi      # vi mode
bind-key -t vi-copy 'v' begin-selection
bind-key -t vi-copy 'y' copy-selection
unbind [                  # unbind the old command copy-mode
bind Escape copy-mode

# 256 color
set -g default-terminal "screen-256color"

# Scrollback
#set -g terminal-overrides 'xterm*:smcup@:rmcup@'

set-option -g mouse on

#### COLOUR (Solarized 256)
# src : https://github.com/seebi/tmux-colors-solarized
# default statusbar colors
set-option -g status-bg colour235 #base02
set-option -g status-fg colour136 #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg colour244 #base0
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg colour166 #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg colour240 #base01

# message text
set-option -g message-bg colour235 #base02
set-option -g message-fg colour166 #orange

# pane number display
set-option -g display-panes-active-colour colour33 #blue
set-option -g display-panes-colour colour166 #orange

# clock
set-window-option -g clock-mode-colour colour64 #green

# Add an @ in current window if pane synchronisation is on
# To insert a utf-8 character in vim: crtl-v, u, followed by 4 hex digit
set-option -gw window-status-current-format '#{?pane_synchronized,#[fg=blue] Òˆ#[default],}#I:#W#F'

# respawn window
# "tmux set set-remain-on-exit on" for zombie mode
bind-key r respawn-window

{% if salt['grains.get']('os') == 'MacOS' %}
bind-key c new-window -c "#{pane_current_path}"
bind-key % split-window -h -c "#{pane_current_path}"
bind-key '"' split-window -v -c "#{pane_current_path}"
{% endif %}

# History Limit
set -g history-limit 10000

# Disable window renaming
set-option -g allow-rename off
set-option -g set-titles on
set-option -g set-titles-string "#W"

# Use prefix C-k to clear the scrolled off (hidden) buffer lines
bind C-k clear-history

# Toggle pane synchronisation
bind C-s set-window-option synchronize-panes
